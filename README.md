# Spring Shop App
Spring Shop App — это учебное Spring Boot приложение интернет-магазина, демонстрирующее работу с REST API, XML/JSON форматами, XSLT-преобразованием, JMS (ActiveMQ Artemis), аудитом изменений и email-уведомлениями. Приложение реализует CRUD-операции для товаров и категорий, веб-интерфейс на Thymeleaf, REST API с поддержкой XML и JSON, автоматическую отправку JMS-событий при создании, обновлении и удалении сущностей, сохранение аудит-логов в PostgreSQL и отправку email-уведомлений при важных событиях и превышении порога цены товара.

Проект написан на Java 17 с использованием Spring Boot 3.3.x, Spring Web, Spring Data JPA, PostgreSQL, Thymeleaf, Spring JMS (ActiveMQ Artemis в embedded-режиме), Jackson (JSON/XML), Jakarta JAXB и Spring Mail. В качестве брокера сообщений используется встроенный ActiveMQ Artemis в режиме pub/sub с Topic. Все изменения сущностей (CREATE, UPDATE, DELETE) публикуются в JMS topic, после чего обрабатываются слушателями для сохранения аудита в базе данных и отправки email-уведомлений.

Функциональность приложения включает веб-интерфейс для управления товарами и категориями, REST API `/api/products` и `/api/categories` с поддержкой JSON и XML, XSLT-преобразование XML-ответов в HTML при открытии в браузере, аудит всех изменений с сохранением в таблицу `audit_log`, JMS-интеграцию для асинхронной обработки событий, email-уведомления о создании и удалении сущностей, а также оповещения при превышении заданного порога цены товара. Дополнительно реализованы тестовые эндпоинты для проверки JMS и email-уведомлений.

Для работы приложения требуется установленный PostgreSQL и Java 17. В базе данных должна существовать схема, указанная в `application.properties`. Таблица аудита может быть создана автоматически через JPA либо вручную с помощью SQL-скрипта `audit_log.sql`. По умолчанию приложение запускается на порту 8081.

Основные REST эндпоинты:
`GET /api/products` — получить список товаров (JSON или XML)
`GET /api/products/{id}` — получить товар по ID
`POST /api/products` — создать товар
`PUT /api/products/{id}` — обновить товар
`DELETE /api/products/{id}` — удалить товар
`GET /api/categories` — получить список категорий
`GET /api/categories/{id}` — получить категорию по ID
`POST /api/categories` — создать категорию
`PUT /api/categories/{id}` — обновить категорию
`DELETE /api/categories/{id}` — удалить категорию

Веб-интерфейс доступен по адресам `/products`, `/categories` и `/audit`, где можно управлять данными и просматривать аудит-логи. При открытии XML-ответов API в браузере автоматически применяется XSLT-шаблон `products.xsl`, который преобразует XML в удобный HTML-вид.

Email-уведомления настраиваются через `application.properties`. По умолчанию используется локальный SMTP-сервер (например, MailHog). Можно задать список email-адресов для уведомлений, порог цены товара и включить или отключить отправку писем.

